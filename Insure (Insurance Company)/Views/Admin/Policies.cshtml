@model IEnumerable<Insure__Insurance_Company_.Models.Policy>

@{
	ViewData["Title"] = "Policies";
}

<div class="page-content-wrapper">

	<h1 class="policy-page-title">Policies</h1>


	<p class="text-center">
		<a class="btn btn-primary" asp-controller="Admin" asp-action="AddPolicyWithInsurance">Add Policy</a>
		<a class="btn btn-secondary ms-2 mt-1" asp-controller="Admin" asp-action="InsTypes">Insurance Types</a>
	</p>

	@if (TempData["DelPolMsg"] != null)
	{
		<div class="alert alert-success mt-3 text-center">
			@TempData["DelPolMsg"]
		</div>
	}

	@if (TempData["AddPolMsg"] != null)
	{
		<div class="alert alert-success mt-3 text-center">
			@TempData["AddPolMsg"]
		</div>
	}

	@if (TempData["PolicyErrorMessage"] != null)
	{
		<div class="alert alert-danger mt-3 text-center">
			@TempData["PolicyErrorMessage"]
		</div>
	}

	<div class="policy-table-container">
		<table class="policy-table">
			<thead>
				<tr>
					<th>Policy Name</th>
					<th>Term Years</th>
					<th>Premium</th>
					<th>Coverage</th>
					<th>Duration In Months</th>
					<th>Insurance Type</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var item in Model)
				{
					<tr>
						<td data-label="Policy Name">@item.PolicyName</td>
						<td data-label="Term Years">@item.TermYears</td>
						<td data-label="Premium">@item.PremiumAmount</td>
						<td data-label="Coverage">@item.CoverageAmount</td>
						<td data-label="DurationInMonths">@item.DurationInMonths</td>
						<td data-label="Insurance Type">@item.InsuranceType?.InsuranceName</td>
						<td data-label="Actions">
							<a class="policy-action-link"
							   asp-action="DelPolicy"
							   asp-route-id="@item.PolicyId"
							   onclick="return confirm('Are you sure you want to delete this policy?');">
								Delete
							</a>
						</td>
					</tr>
				}
			</tbody>
		</table>
	</div>
</div>

@if (!Model.Any())
{
	<p class="text-center text-muted mt-4">
		No Policies found.
	</p>
}